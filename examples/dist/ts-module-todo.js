!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["ts-module-todo"]=t():e["ts-module-todo"]=t()}(self,(()=>(()=>{var e={194:e=>{var t;self,t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addEventListeners:()=>v,evaluateExpression:()=>r,findNextTemplateExpression:()=>o,init:()=>p,loadTree:()=>l,removeEventListeners:()=>f,render:()=>a,variable:()=>m});var n=function(e,t){var n="return (state) => {".concat(Object.keys(t).map((function(e){return"const ".concat(e,' = state["').concat(e,'"];')})).join("\n"),"; return ").concat(e,"}");return Function(n)()};function r(e,t){try{var r=n(e,t)(t);return Array.isArray(r)&&(r=r.join("")),r}catch(t){throw new Error("Failed to create function from expression {{".concat(e,"}}: ").concat(t.message))}}function o(e){for(var t=e.indexOf("{{"),n=0,r=t;r<e.length;r++)if("{{"===e.slice(r,r+2)?(n++,r++):"}}"===e.slice(r,r+2)&&(n--,r++),0===n)return{start:t,end:r};return{start:t,end:-1}}var a=function(e,t){for(var n=0;n<e.length;n++){for(var a=e[n],l=a.element,v="",f=a.template,s=!0;s;){var p=o(f),m=p.start,y=p.end;if(-1===y){s=!1;break}var h=f.slice(m+2,y-1),b=f.slice(0,m),g=f.slice(y+1),x=r(c(h),t);v+="".concat(b).concat(x),f=g}var E=i(l,v+=f);E.length>0&&E.map((function(e){var n=e.element,r=e.content;d(n),n.innerHTML=r,u(n,t)}))}};function c(e){var t=document.createElement("div");return t.innerHTML=function(e){return e.replace(/<(?=[^<>]*>)/g,"&lt;").replace(/(?<=[^<>]*)>/g,"&gt;")}(e),t.textContent||t.innerText||""}function i(e,t){var n=e.cloneNode();return n.innerHTML=t,function e(t,n){for(var r=!1,o=0;o<t.childNodes.length;o++){var a=t.childNodes[o],c=n.childNodes[o];if(a.nodeType===Node.TEXT_NODE&&c&&c.nodeType===Node.TEXT_NODE&&a.textContent!==c.textContent){r=!0;break}}if(r)return[{element:t,content:n.innerHTML}];for(var i=[],l=0;l<t.childNodes.length;l++){var u=e(t.childNodes[l],n.childNodes[l]);i=i.concat(u)}return i}(e,n)}var l=function(e){for(var t=[],n=document.evaluate(".//*[text()[contains(., '{{')] and text()[contains(., '}}')]]",e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),r=n.iterateNext();r;)t.push({element:r,template:r.innerHTML}),r=n.iterateNext();return t};function u(e,t){v(e,"click",t),v(e,"change",t)}function d(e){f(e,"click"),f(e,"change")}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",n=arguments.length>2?arguments[2]:void 0;e.querySelectorAll("[data-on-".concat(t,"]")).forEach((function(e){var r=s(t,e,n);e.addEventListener(t,r),e["".concat(t,"Handler")]=r}))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";null==e||e.querySelectorAll("[data-on-".concat(t,"]")).forEach((function(e){var n=e["".concat(t,"Handler")];n&&e.removeEventListener(t,n)}))}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click",t=arguments.length>2?arguments[2]:void 0,r=(arguments.length>1?arguments[1]:void 0).getAttribute("data-on-".concat(e));if(!r)throw new Error("Missing data-handler attribute");var o=n(r,t);return function(n){try{o(t),n.preventDefault()}catch(n){throw new Error("".concat(n.message,": data-on-").concat(e,"=").concat(r))}}},p=function(e){var t={},n=[],r={element:null,get value(){if(this.element||(this.element=e.querySelector("#app")),!this.element)throw new Error("No app element found!");return this.element}},o=function(){n=l(r.value),u(r.value,t),a(n,t)},c=e.onLoadHandler;return c&&e.removeEventListener("DOMContentLoaded",c),e.addEventListener("DOMContentLoaded",o),e.onLoadHandler=o,{variable:function(e,r){return t[e]=r,{set value(r){!function(e,r){setTimeout((function(){t[e]=r,a(n,t)}),0)}(e,r)},get value(){return t[e]}}}}},m=p(document).variable;return t})(),e.exports=t()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r);var e=n(194);function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=(0,e.variable)("todos",[{text:"hello",done:!1}]);(0,e.variable)("save",(function(){var e=document.querySelector("[data-input=todo");null!=e&&e.value&&(a.set([].concat(t(a.value),[{text:e.value,done:!1}])),e.value="")})),(0,e.variable)("toggleTodo",(function(e){var n=t(a.value);n[e].done=!n[e].done,a.set(n)})),(0,e.variable)("Checkbox",(function(e){var t=e.index,n=void 0===t?-1:t,r=e.checked,o=void 0!==r&&r;return'<input type="checkbox" id="todo'.concat(n,'" data-on-change="toggleTodo(').concat(n,')" ').concat(o?"checked":""," />")}));var c=(0,e.variable)("counter",0);(0,e.variable)("increment",(function(){c.set(c.value+1)}))})(),r})()));