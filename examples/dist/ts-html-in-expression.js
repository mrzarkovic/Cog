!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["t"]=t():n["t"]=t()}(self,(()=>(()=>{"use strict";var n={};function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(n)}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function e(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function o(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(r){var e,i,a;e=n,i=r,a=o[r],(i=function(n){var r=function(n,r){if("object"!==t(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var o=e.call(n,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"===t(r)?r:String(r)}(i))in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))}))}return n}(n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"o",{value:!0})})(n);var i=/\{\{(.+?)\}\}/,a=function(n,t){var r="return (state) => {".concat(Object.keys(t).map((function(n){return"const ".concat(n,' = state["').concat(n,'"];')})).join("\n")," return ").concat(n,"}");return Function(r)()};function u(n,t){try{var r=a(n,t)(t);return Array.isArray(r)&&(r=r.join("")),r}catch(t){throw new Error("Failed to create function from expression {{".concat(n,"}}: ").concat(t.message))}}function f(n){for(var t=n.indexOf("{{"),r=0,e=t;e<n.length;e++)if("{{"===n.slice(e,e+2)?(r++,e++):"}}"===n.slice(e,e+2)&&(r--,e++),0===r)return{start:t,end:e};return{start:t,end:-1}}var c=function(n){return n.split("-").reduce((function(n,t,r){return n+(r?t[0].toUpperCase()+t.slice(1):t)}),"")},v=function(n){return n.tagName.includes("-")},l=function(n,t){for(var r=n,e=!0,o="";e;){var i=f(r),a=i.start,c=i.end;if(-1===c){e=!1;break}var v=r.slice(a+2,c-1),l=r.slice(0,a),d=r.slice(c+1),s=u((b=v,m=void 0,(m=document.createElement("div")).innerHTML=function(n){return n.replace(/<(?=[^<>]*>)/g,"&lt;").replace(/(?<=[^<>]*)>/g,"&gt;")}(b),m.textContent||m.innerText||""),t);o+="".concat(l).concat(s),r=d}var b,m;return o+r};function d(n,t){for(var r=[],e=0;e<n.attributes.length;e++){var o=n.attributes[e],i=t.getAttribute(o.name);i!==o.value&&r.push({name:o.name,newValue:i||""})}return r}var s=function(n){return n.replace(/[\r\n]+\s*/g,"")};function b(n,t){var r=document.createElement("div");r.innerHTML=n;var e=document.createElement("div");return e.innerHTML=t,function n(t,r){if(t.nodeType===Node.TEXT_NODE)return t.textContent!==r.textContent?[{element:t,content:r.innerHTML}]:[];t.innerHTML=s(t.innerHTML),r.innerHTML=s(r.innerHTML);for(var e=!1,o=[],i=0;i<t.childNodes.length;i++){var a=t.childNodes[i],u=r.childNodes[i];if(a.nodeType===Node.TEXT_NODE&&u&&u.nodeType===Node.TEXT_NODE){if(a.textContent!==u.textContent){e=!0;break}}else if(a.nodeType===Node.ELEMENT_NODE){var f=d(a,u);f.length>0&&o.push({element:a,attributes:f})}}if(e)return[{element:t,content:r.innerHTML}];for(var c=0;c<t.childNodes.length;c++){var v=n(t.childNodes[c],r.childNodes[c]);o=o.concat(v)}return o}(r,e)}var m=function(n){return Array.from(n.attributes).map((function(n){var t=i.exec(n.value);return{name:n.name,value:t?t[1]:n.value,i:!!t}}))},y=function(n,t){for(var r=[],e=document.evaluate("self::*[text()[contains(., '{{')] and text()[contains(., '}}')]] | self::*[@*[contains(., '{{') and contains(., '}}')]] | .//*[text()[contains(., '{{')] and text()[contains(., '}}')]] | .//*[@*[contains(., '{{') and contains(., '}}')]]",n,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),o=e.iterateNext();o;){if(!v(o)){var i=m(o);r.push({element:o,u:o.innerHTML,attributes:i,v:t})}o=e.iterateNext()}return r},p=function(n){for(var t=[],r=document.evaluate("template",n,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),e=r.iterateNext();e;)e.innerHTML=s(e.innerHTML),t.push(e),e=r.iterateNext();return t};function h(n,t){j(n,"click",t),j(n,"change",t)}function j(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",r=arguments.length>2?arguments[2]:void 0;n.querySelectorAll("[data-on-".concat(t,"]")).forEach((function(n){var e=O(t,n,r);n.addEventListener(t,e),n["".concat(t,"Handler")]=e}))}function w(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";null==n||n.querySelectorAll("[data-on-".concat(t,"]")).forEach((function(n){var r=n["".concat(t,"Handler")];r&&n.removeEventListener(t,r)}))}var O=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click",t=arguments.length>2?arguments[2]:void 0,r=(arguments.length>1?arguments[1]:void 0).getAttribute("data-on-".concat(n));if(!r)throw new Error("Missing data-handler attribute");var e=a(r,t);return function(o){try{e(t),o.preventDefault()}catch(o){throw new Error("".concat(o.message,": data-on-").concat(n,"=").concat(r))}}},g=function(n){return n.filter((function(n){var t=n.element;return document.body.contains(t)}))},S=function(n){var t={},e=[],i=[],a=[];function f(e){function f(){return Reflect.construct(HTMLElement,[],f)}f.prototype=Object.create(HTMLElement.prototype),f.prototype.constructor=f,f.prototype.connectedCallback=function(){var e,f,v,d=this,s=i.find((function(n){return n.getAttribute("id")===d.tagName.toLowerCase()})),b=m(d),y=n.createElement("div");y.innerHTML=s.innerHTML.replace(/\{\{\s*children\s*\}\}/g,d.innerHTML);var p,h=o({},t),j=function(n,t){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(n,t){if(n){if("string"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){e&&(n=e);var o=0,i=function(){};return{s:i,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return u=n.done,n},e:function(n){f=!0,a=n},f:function(){try{u||null==e.l||e.l()}finally{if(f)throw a}}}}(b);try{for(j.s();!(p=j.n()).done;){var w=p.value,O=w.value;w.i&&(O=u(O,t)),h[c(w.name)]=O}}catch(n){j.e(n)}finally{j.f()}var S=y.innerHTML,N=[];(null===(e=y.firstChild)||void 0===e?void 0:e.nodeType)!==Node.TEXT_NODE&&(N=m(y.firstChild));var E=l(y.innerHTML,h);y.innerHTML=E;var A=y.firstChild;null===(f=d.parentNode)||void 0===f||f.insertBefore(A,d),!d.dataset.m&&A&&(A.p=E,a.push({element:A,u:S,attributes:N,v:b}),a=g(a)),null===(v=d.parentNode)||void 0===v||v.removeChild(d)},customElements.define(e,f)}var v={element:null,get value(){if(this.element||(this.element=n.querySelector("#app")),!this.element)throw new Error("No app element found!");return this.element}};function j(){(function(n,t){for(var r=0,e=function(){var e=o({},t),i=n[r],a=i.element,f=i.u,v=i.attributes,b=i.v;if(b)for(var m=0;m<b.length;m++){var y=b[m],p=y.name,j=y.value,O=y.i?u(j,e):j;e[c(p)]=O}if(v)for(var g=0;g<v.length;g++){var S=v[g],N=S.name,E=S.value,A=S.i?u(E,e):E;A!==a.getAttribute(N)&&a.setAttribute(N,A)}var M,x,k,T=l(f,e);if(a.nodeType===Node.TEXT_NODE)a.textContent!==T&&(a.textContent=T);else{var C=(x=T,(k=(M=a).cloneNode()).innerHTML=x,function n(t,r){if(t.nodeType===Node.TEXT_NODE)return t.textContent!==r.textContent?[{element:t,content:r.innerHTML}]:[];t.innerHTML=s(t.innerHTML),r.innerHTML=s(r.innerHTML);for(var e=!1,o=[],i=0;i<t.childNodes.length;i++){var a=t.childNodes[i],u=r.childNodes[i];if(a.nodeType===Node.TEXT_NODE&&u&&u.nodeType===Node.TEXT_NODE){if(a.textContent!==u.textContent){e=!0;break}}else if(a.nodeType===Node.ELEMENT_NODE){var f=d(a,u);f.length>0&&o.push({element:a,attributes:f})}}if(e)return[{element:t,content:r.innerHTML}];for(var c=0;c<t.childNodes.length;c++){var v=n(t.childNodes[c],r.childNodes[c]);o=o.concat(v)}return o}(M,k));C.length>0&&C.map((function(n){var t,r=n.element,o=n.content,i=n.attributes;void 0!==o?(w(t=r,"click"),w(t,"change"),r.innerHTML=o,h(r,e)):void 0!==i&&i.map((function(n){var t=n.name,e=n.newValue;r.setAttribute(t,e)}))}))}};r<n.length;r++)e()})(e,t),function(n,t){for(var r=0;r<n.length;r++){var e=o({},t),i=n[r],a=i.element,f=i.u,v=i.attributes,d=i.v;if(d)for(var s=0;s<d.length;s++){var m=d[s],y=m.name,p=m.value,h=m.i?u(p,e):p;e[c(y)]=h}if(v)for(var j=0;j<v.length;j++){var w=v[j],O=w.name,g=w.value,S=w.i?u(g,e):g;S!==a.getAttribute(O)&&a.setAttribute(O,S)}var N=l(f,e);if(b(a.p,N).length>0)if(a.p=N,a.nodeType===Node.TEXT_NODE)a.textContent=N;else{var E=(new DOMParser).parseFromString(N,"text/html").body.firstChild;a.innerHTML=E.innerHTML}}}(a,t)}function O(n,r){setTimeout((function(){t[n]=r,j()}),0)}var S=function(){e=y(v.value,[]),function(n){n.forEach((function(n){var t=n.getAttribute("id");if(!t)throw new Error("Missing id attribute");if(1!==n.content.childNodes.length)throw new Error("Template ".concat(t," should have a single child"));f(t)}))}(i=p(v.value)),h(v.value,t),j()},N=n.h;return N&&n.removeEventListener("DOMContentLoaded",N),n.addEventListener("DOMContentLoaded",S),n.h=S,{variable:function(n,r){return t[n]=r,{set value(t){O(n,t)},get value(){return t[n]},set:function(t){O(n,t)}}}}}(document).variable;S("names",["Alice","Bob","Carol"]);var N=S("count",0);return window.increment=function(){N.value++},n})()));