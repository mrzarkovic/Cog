(()=>{"use strict";var t=function(){var t=[],n={},e=null,r=function(){for(var e=0,r=t;e<r.length;e++){for(var i=r[e],u=i.element,l="",f=i.template,s=!0;s;){for(var v=f.indexOf("{{"),d=-1,m=0,y=v;y<f.length;y++)if("{{"===f.slice(y,y+2)?(m++,y++):"}}"===f.slice(y,y+2)&&(m--,y++),0===m){d=y;break}if(-1===v||-1===d||v>=d){s=!1;break}var h=f.slice(v+2,d-1),g=f.slice(0,v),p=f.slice(d+1),E=o(h);try{var b,A=Function("return (state) => {\n                        ".concat(Object.keys(n).map((function(t){return"const ".concat(t,' = state["').concat(t,'"];')})).join("\n"),"\n                            return ").concat(E,"\n                        }"))()(n);Array.isArray(A)&&(A=A.join("")),l+="".concat(g).concat(null!==(b=A)&&void 0!==b?b:E)}catch(t){if(t instanceof Error)throw new Error("".concat(t.message," {{").concat(E,"}}"))}f=p}(l+=f)!==u.innerHTML&&(c(u),u.innerHTML=l,a(u))}};function o(t){var n=document.createElement("div");return n.innerHTML=function(t){return t.replace(/<(?=[^<>]*>)/g,"&lt;").replace(/(?<=[^<>]*)>/g,"&gt;")}(t),n.textContent||n.innerText||""}function a(t){i(t,"click"),i(t,"change")}function c(t){u(t,"click"),u(t,"change")}function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";null==t||t.querySelectorAll("[data-".concat(n,"]")).forEach((function(t){var e=l(n,t);t.addEventListener(n,e),t["".concat(n,"Handler")]=e}))}function u(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";null==t||t.querySelectorAll("[data-".concat(n,"]")).forEach((function(t){var e=t["".concat(n,"Handler")];e&&t.removeEventListener(n,e)}))}var l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click",e=arguments.length>1?arguments[1]:void 0;return function(r){var o=e.getAttribute("data-".concat(t));if(o)try{Function("return (state) => {\n                        ".concat(Object.keys(n).map((function(t){return"const ".concat(t,' = state["').concat(t,'"];')})).join("\n"),"\n                            ").concat(o,"\n                        }"))()(n)}catch(r){if(r instanceof Error)throw new Error("".concat(r.message,": data-").concat(t,"=").concat(o))}r.preventDefault()}};return document.addEventListener("DOMContentLoaded",(function(){if(!(e=document.querySelector("#app")))throw new Error("No app element found!");!function(){for(var n=document.evaluate(".//*[text()[contains(., '{{')] and text()[contains(., '}}')]]",e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),r=n.iterateNext();r;)t.push({element:r,template:r.innerHTML}),r=n.iterateNext()}(),a(e),r()})),{variable:function(t,e){return n[t]=e,{set:function(e){!function(t,e){setTimeout((function(){n[t]=e,r()}),0)}(t,e)},get value(){return n[t]}}}}}(),n=t.variable;function e(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var o=n("todos",[{text:"hello",done:!1}]);n("save",(function(){var t=document.querySelector("[data-input=todo");null!=t&&t.value&&(o.set([].concat(e(o.value),[{text:t.value,done:!1}])),t.value="")})),n("toggleTodo",(function(t){var n=e(o.value);n[t].done=!n[t].done,o.set(n)}))})();