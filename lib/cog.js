(()=>{"use strict";var t=function(){var t=[],e={},n=null,r=function(t){return Function("return (state, value) => {".concat(Object.keys(e).map((function(t){return"const ".concat(t,' = state["').concat(t,'"];')})).join("\n"),"; return ").concat(t,"}"))()};function o(t,e){try{var n,o=r(t)(e);return Array.isArray(o)&&(o=o.join("")),null!==(n=o)&&void 0!==n?n:t}catch(e){if(e instanceof Error)throw new Error("".concat(e.message," {{").concat(t,"}}"));return t}}function c(t){for(var e=t.indexOf("{{"),n=0,r=e;r<t.length;r++)if("{{"===t.slice(r,r+2)?(n++,r++):"}}"===t.slice(r,r+2)&&(n--,r++),0===n)return{start:e,end:r};return{start:e,end:-1}}var a=function(){t.map((function(t){for(var n=t.element,r="",a=t.template,l=!0;l;){var f=c(a),v=f.start,s=f.end;if(-1===v||-1===s||v>=s){l=!1;break}var h=a.slice(v+2,s-1),m=a.slice(0,v),g=a.slice(s+1),p=o(i(h),e);r+="".concat(m).concat(p),a=g}var E=function(t,e){var n=t.cloneNode();function r(t,e){if(t.nodeType===Node.ELEMENT_NODE&&e.nodeType===Node.ELEMENT_NODE){for(var n=!1,o=0;o<t.childNodes.length;o++){var c=t.childNodes[o],a=e.childNodes[o];if(c.nodeType===Node.TEXT_NODE&&a&&a.nodeType===Node.TEXT_NODE&&c.textContent!==a.textContent){n=!0;break}}if(n)return[{element:t,content:e.innerHTML}];if(t.attributes.toString()!==e.attributes.toString())return[{element:t,content:e.innerHTML}];for(var i=[],u=0;u<t.childNodes.length;u++){var l=r(t.childNodes[u],e.childNodes[u]);i=i.concat(l)}return i}return[]}return n.innerHTML=e,r(t,n)}(n,r+=a);E.length>0&&E.map((function(t){var e,n=t.element,r=t.content;d(e=n,"click"),d(e,"change"),n.innerHTML=null!=r?r:"",u(n)}))}))};function i(t){var e=document.createElement("div");return e.innerHTML=function(t){return t.replace(/<(?=[^<>]*>)/g,"&lt;").replace(/(?<=[^<>]*)>/g,"&gt;")}(t),e.textContent||e.innerText||""}function u(t){l(t,"click"),l(t,"change")}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";null==t||t.querySelectorAll("[data-".concat(e,"]")).forEach((function(t){var n=f(e,t);t.addEventListener(e,n),t["".concat(e,"Handler")]=n}))}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";null==t||t.querySelectorAll("[data-".concat(e,"]")).forEach((function(t){var n=t["".concat(e,"Handler")];n&&t.removeEventListener(e,n)}))}var f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"click",n=arguments.length>1?arguments[1]:void 0;return function(o){var c=n.getAttribute("data-".concat(t));if(c)try{r(c)(e)}catch(o){if(o instanceof Error)throw new Error("".concat(o.message,": data-").concat(t,"=").concat(c))}o.preventDefault()}};return document.addEventListener("DOMContentLoaded",(function(){if(!(n=document.querySelector("#app")))throw new Error("No app element found!");!function(){for(var e=document.evaluate(".//*[text()[contains(., '{{')] and text()[contains(., '}}')]]",n,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),r=e.iterateNext();r;)t.push({element:r,template:r.innerHTML}),r=e.iterateNext()}(),u(n),a()})),{variable:function(t,n){return e[t]=n,{set:function(n){!function(t,n){setTimeout((function(){e[t]=n,a()}),0)}(t,n)},get value(){return e[t]}}}}}(),e=t.variable;function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=e("todos",[{text:"hello",done:!1}]);e("test","hello world"),e("save",(function(){var t=document.querySelector("[data-input=todo");null!=t&&t.value&&(o.set([].concat(n(o.value),[{text:t.value,done:!1}])),t.value="")})),e("toggleTodo",(function(t){var e=n(o.value);e[t].done=!e[t].done,o.set(e)})),e("Checkbox",(function(t){var e=t.index,n=void 0===e?-1:e,r=t.checked,o=void 0!==r&&r;return'<input type="checkbox" id="todo'.concat(n,'" data-change="toggleTodo(').concat(n,')" ').concat(o?"checked":""," />")}))})();